# **CQRS (Command and Query Responsibility Segregation)**

명령(command)과 조회(query)의 책임 분리

<br>
<br>

> ### **명령과 조회에 단일 모델을 사용하는경우의 문제**

이도 저도 아닌 잡탕이 될 수 있음

- 코드 역할 / 책임 모호
- 의미/가독성 나빠짐
- 유지보수성이 떨어짐

ex) Member 모델에 기존 Member 에 대한 책임만 지님  
-> 추가 요구사항1
로그인 히스토리를 추가하라

-> 추가 요구사항2
멤버의 주문내역을 추가하라

Member 가 Login_history , Order 와도 의존성을 맺게됨

<br>

> ### **명령과 쿼리는 다루는 데이터가 다름**

명령 -> 한 영역의 데이터  
ex) member
쿼리 -> 여러 영역의 데이터  
ex) member , order join 하여 주문내역  
member , login_history join 하여 접속내역 등등..

<br>

> ### **기능마다 성능 요구가 다름**

- 기능마다 트래픽 패턴, 성능 요구 다름

  - 사용자의 상품 목록 조회, 상품 상세조회
  - 사용자의 주문
  - 사용자의 댓글 등록
    ##### (위의 예시는 트래픽이 몰리는 시간이 있음 , 조금만 고객에게 늦어져도 치명적)
  - 백오피스의 판매 수치
    ##### (조금 늦게나와도 타격 없음)

- 기능마다 서로 다른 성능 향상 방법 필요
  - 단일 모드로는 다양한 성능 향상 기법 적용 어려움

## **CQRS 구현 형태**

1. 같은 프로세스, 같은 DB
2. 같은 프로세스, 같은 DB, 다른 테이블
3. 같은 프로세스, 다른 DB
4. 다른 프로세스, 다른 DB
